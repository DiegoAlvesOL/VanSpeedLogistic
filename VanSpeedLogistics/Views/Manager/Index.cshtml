@using VanSpeedLogistics.Models
@using Microsoft.AspNetCore.Identity
@inject UserManager<ApplicationUser> UserManager

@{
    // Define o título que aparecerá na aba do navegador
    ViewData["Title"] = "Manager Area";
    var currentUser = await UserManager.GetUserAsync(User);
    var fullName = currentUser?.FullName ?? User.Identity.Name;
}
@{
    // Defines the title that will appear in the browser tab
    ViewData["Title"] = "Manager Area";
    // This view will be wrapped by the main layout (_Layout.cshtml)
}

<!-- [VS] Card 10: START - Manager Dashboard (English/Previous Day Focus) -->

<!-- Main section title and welcome message -->
<h1 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">
    Dashboard
</h1>

<!-- Welcome message using Identity to display the logged-in user's name -->
<p class="text-lg text-gray-600 mb-8">
    Welcome, <span class="font-semibold">@fullName</span>! This is your exclusive administrative area.
</p>

<!-- KPI Structure (Key Performance Indicators) - REMAINS THE SAME -->
<!-- Uses light gray cards with shadows, focused on previous day data -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
    
    <!-- Card 1: Total Deliveries (Previous Day) -->
    <div class="bg-gray-50 p-6 rounded-lg shadow-md transform hover:shadow-lg transition duration-300">
        <h2 class="text-base font-medium text-gray-700 mb-2">Total Deliveries (Previous Day)</h2>
        <!-- Placeholder Data -->
        <p class="text-5xl font-extrabold text-indigo-700">210</p>
        <p class="text-sm text-gray-500 mt-2">All Operators combined</p>
    </div>
    
    <!-- Card 2: Total Collections (Previous Day) -->
    <div class="bg-gray-50 p-6 rounded-lg shadow-md transform hover:shadow-lg transition duration-300">
        <h2 class="text-base font-medium text-gray-700 mb-2">Total Collections (Previous Day)</h2>
        <!-- Placeholder Data -->
        <p class="text-5xl font-extrabold text-green-700">45</p>
        <p class="text-sm text-gray-500 mt-2">All Operators combined</p>
    </div>
    
    <!-- Card 3: Pending Returns (Placeholder - unchanged focus) -->
    <div class="bg-gray-50 p-6 rounded-lg shadow-md transform hover:shadow-lg transition duration-300">
        <h2 class="text-base font-medium text-gray-700 mb-2">Pending Returns (Current)</h2>
        <!-- Placeholder Data -->
        <p class="text-5xl font-extrabold text-red-700">3</p>
        <p class="text-sm text-gray-500 mt-2">Action required immediately</p>
    </div>
    
</div>

<!-- DETAILED LOG TABLE - UPDATED STRUCTURE -->
<h2 class="text-2xl font-semibold text-gray-700 mb-4 border-b pb-1">
    Recent Driver Activity Log
</h2>

<div class="bg-white rounded-lg shadow-md overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-100">
            <tr>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Date/Time
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Driver Name
                </th>
                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Deliveries
                </th>
                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Collections
                </th>
                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Returns
                </th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Notes
                </th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
            <!-- [TO BE IMPLEMENTED] Here we will use an foreach loop over the DeliveryRecords -->
            
            <!-- Example Row 1: Recent Log Entry -->
            <tr class="hover:bg-gray-50">
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-11-30 17:30
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                    Diego Alves (Operator)
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-indigo-700 font-semibold">
                    1
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-gray-500">
                    0
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-gray-500">
                    0
                </td>
                <td class="px-6 py-4 text-sm text-gray-600 truncate max-w-xs">
                    Final delivery batch completed. All packages dropped off at depot.
                </td>
            </tr>

            <!-- Example Row 2: Collection Entry -->
            <tr class="hover:bg-gray-50">
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-11-30 16:45
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                    John Doe (Operator)
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-gray-500">
                    0
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-green-700 font-semibold">
                    1
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-gray-500">
                    0
                </td>
                <td class="px-6 py-4 text-sm text-gray-600 truncate max-w-xs">
                    Collected package from Warehouse B. Ready for tomorrow's delivery.
                </td>
            </tr>

            <!-- Example Row 3: Return Entry -->
            <tr class="hover:bg-gray-50">
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2025-11-29 18:00
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                    Jane Smith (Operator)
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-gray-500">
                    0
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-gray-500">
                    0
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-center text-red-700 font-semibold">
                    1
                </td>
                <td class="px-6 py-4 text-sm text-gray-600 truncate max-w-xs">
                    Returned faulty unit to the depot. Documentation signed by supervisor.
                </td>
            </tr>
            
            <!-- End of Placeholder Rows -->
        </tbody>
    </table>
</div>

<!-- Informational footer about data status -->
<p class="mt-10 text-gray-500 border-t pt-4">
    **Note:** The data displayed above is static. The next development phase will implement dynamic database query logic to populate KPIs and the Driver Activity Log.
</p>

<!-- [VS] Card 10: END - Manager Dashboard (English/Previous Day Focus) -->